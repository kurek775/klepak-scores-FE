<div class="max-w-xl mx-auto p-8">
  <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Import Event</h1>

  @if (summary(); as s) {
    <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6">
      <h2 class="text-lg font-semibold text-green-800 dark:text-green-300 mb-3">Import Successful</h2>
      <p class="text-sm text-green-700 dark:text-green-400 mb-1">
        Event: <span class="font-medium">{{ s.event_name }}</span>
      </p>
      <p class="text-sm text-green-700 dark:text-green-400 mb-1">Groups created: {{ s.groups_created }}</p>
      <p class="text-sm text-green-700 dark:text-green-400 mb-4">Participants created: {{ s.participants_created }}</p>
      <div class="flex gap-3">
        <button
          (click)="viewEvent()"
          class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700"
        >
          View Event
        </button>
        <a
          routerLink="/events"
          class="px-4 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"
        >
          Back to Events
        </a>
      </div>
    </div>
  } @else {
    <form (ngSubmit)="onSubmit()" class="space-y-5">
      <div>
        <label for="eventName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Event Name
        </label>
        <input
          id="eventName"
          type="text"
          [(ngModel)]="eventName"
          name="eventName"
          required
          class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="e.g. Summer Camp 2026"
        />
      </div>

      <div>
        <label for="csvFile" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          CSV File
        </label>
        <input
          id="csvFile"
          type="file"
          accept=".csv"
          (change)="onFileSelected($event)"
          class="w-full text-sm text-gray-600 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
        />
      </div>

      @if (error()) {
        <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 text-sm rounded-lg px-4 py-3">
          {{ error() }}
        </div>
      }

      <button
        type="submit"
        [disabled]="loading() || !eventName.trim() || !selectedFile"
        class="w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {{ loading() ? 'Importing...' : 'Import' }}
      </button>
    </form>

    <div class="mt-6">
      <a routerLink="/events" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200">&larr; Back to Events</a>
    </div>
  }
</div>
